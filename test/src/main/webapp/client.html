<html>
<!-- blob.text().then() or blob.arrayBuffer().then() -->
<head>
<title>client</title>
<meta charset="utf-8" />
<script type="text/javascript">
	// general variables
	var ws;
	var audio;
	//start method
	function start() {
		// defining variables
		audio = document.querySelector("audio");
		// preparing ws
		ws = new WebSocket('ws://localhost:8080/test/main');
		// handle events
		ws.addEventListener("open", function() {
			console.log("open")
		});

		ws.addEventListener("message", function(msg) {
			var blob = msg.data;
		    blob.text().then(str =>{
		    	audio.pause();
		    	audio.src = "data:audio/ogg;"+str.replace("Ogg","");
		    	audio.play();
		    });
		});

		ws.addEventListener("close", function() {
			console.log("closed");
		});
	}
</script>
</head>
<body onload="start()">
	<h1>client</h1>
	<audio></audio>
</body>
</html>